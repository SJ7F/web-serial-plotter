---
description: Ring buffer store, windowing, and freeze behavior
---
# Plot Store, Windowing, and Freeze

- DataStore (`RingStore`): [src/store/dataStore.tsx](mdc:src/store/dataStore.tsx)
  - Fixed-capacity ring buffers per series, `append(values)` O(1).
  - `getWindow({ startFromNewest, length })` returns a window aligned newest-first.
  - `total` increments for each append; used to anchor frozen views.

- Freeze behavior:
  - UI Scroll > 0 indicates a frozen view.
  - Effective offset: `uiScroll + (currentTotal - freezeBaseTotal)` keeps viewport anchored.
  - "Go live" sets Scroll to 0.

- Renderer (`PlotCanvas`): [src/components/PlotCanvas.tsx](mdc:src/components/PlotCanvas.tsx)
  - ResizeObserver adjusts DPR/backing store only when size changes.
  - Draws from snapshot without additional slicing.
  - Redraws on snapshot or theme class changes.
